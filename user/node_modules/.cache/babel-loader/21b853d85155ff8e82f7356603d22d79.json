{"ast":null,"code":"import _objectSpread from \"/media/mark/mark_nakachon/cafeHungamaFrontEnd/user/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/media/mark/mark_nakachon/cafeHungamaFrontEnd/user/src/Context.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nconst myContext = React.createContext();\n\nclass ContextProvider extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSelectChange = (selectedRowKeys, selectedRows) => {\n      //  console.log(\"selectedRowKeys changed: \", selectedRowKeys, selectedRows);\n      this.setState({\n        selectedRowKeys,\n        selectedData: selectedRows //price: selectedRows.reduce((acc, curr) => acc + curr.price, 0)\n\n      });\n    };\n\n    this.signup = userInfo => {\n      return axios.post(\"/auth/signup\", userInfo).then(response => {\n        const _response$data = response.data,\n              user = _response$data.user,\n              token = _response$data.token;\n        this.setState({\n          user,\n          token\n        }); // forward the response, just in case\n        // it's needed down the promise chain\n\n        return response;\n      });\n    };\n\n    this.state = {\n      location: '',\n      date: '',\n      eventType: '',\n      venues: '',\n      bookedSlots: [],\n      selectedRowKeys: [],\n      // Check here to configure the default column,\n      selectedRows: [],\n      selectedData: [],\n      user: {},\n      token: \"\"\n    };\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n    this.handleLocationClick = this.handleLocationClick.bind(this);\n    this.handleEventTypeClick = this.handleEventTypeClick.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.updateBookings = this.updateBookings.bind(this);\n  }\n\n  componentDidMount() {\n    //if(this.state.location==='' && this.state.date==='' && this.state.eventType===''){\n    fetch(\"https://cafehungama.herokuapp.com/user/venues/all\").then(response => response.json()).then(data => {\n      this.setState({\n        venues: data\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  handleButtonClick(e) {\n    //message.info('Click on left button.');\n    //console.log('searching data');\n\n    /*console.log(this.state.location,this.state.eventType\n        ,this.state.date);*/\n    var data = {\n      location: this.state.location,\n      eventType: this.state.eventType,\n      date: this.state.date\n    };\n    fetch(\"https://cafehungama.herokuapp.com/user/venues/search/\", {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    }).then(response => response.json()).then(data => {\n      this.setState({\n        venues: data.filteredVenues\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  handleLocationClick(e) {\n    // message.info('Click on menu item.');\n    this.setState({\n      location: e.key\n    });\n  }\n\n  onChange(date, dateString) {\n    //  console.log(date,dateString);\n    this.setState({\n      date: dateString\n    });\n  }\n\n  handleEventTypeClick(e) {\n    //console.log('click event',e);\n    this.setState({\n      eventType: e.key\n    });\n  }\n\n  updateBookings(selectedRowKeys) {\n    console.log(selectedRowKeys);\n    /*this.setState({\n        bookedSlots:bookings\n    })*/\n\n    /* this.setState({\n         bookedSlots:bookings\n     })*/\n  }\n\n  render() {\n    return React.createElement(myContext.Provider, {\n      value: _objectSpread({}, this.state, {\n        handleButtonClick: this.handleButtonClick,\n        handleLocationClick: this.handleLocationClick,\n        handleEventTypeClick: this.handleEventTypeClick,\n        onChange: this.onChange,\n        updateBookings: this.updateBookings,\n        onSelectChange: this.onSelectChange\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nconst ContextConsumer = myContext.Consumer;\nexport { ContextConsumer, ContextProvider };","map":{"version":3,"sources":["/media/mark/mark_nakachon/cafeHungamaFrontEnd/user/src/Context.js"],"names":["React","Component","axios","myContext","createContext","ContextProvider","constructor","props","onSelectChange","selectedRowKeys","selectedRows","setState","selectedData","signup","userInfo","post","then","response","data","user","token","state","location","date","eventType","venues","bookedSlots","handleButtonClick","bind","handleLocationClick","handleEventTypeClick","onChange","updateBookings","componentDidMount","fetch","json","catch","err","console","log","e","method","headers","body","JSON","stringify","filteredVenues","key","dateString","render","children","ContextConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nconst myContext = React.createContext();\n\nclass ContextProvider extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            location:'',\n            date:'',\n            eventType:'',\n            venues:'',\n            bookedSlots:[],\n            selectedRowKeys: [], // Check here to configure the default column,\n            selectedRows: [],\n            selectedData:[],\n            user:{},\n            token:\"\"\n         }\n         this.handleButtonClick = this.handleButtonClick.bind(this);\n         this.handleLocationClick = this.handleLocationClick.bind(this);\n         this.handleEventTypeClick = this.handleEventTypeClick.bind(this);\n         this.onChange = this.onChange.bind(this);\n         this.updateBookings = this.updateBookings.bind(this);\n\n    }\n    componentDidMount(){\n        //if(this.state.location==='' && this.state.date==='' && this.state.eventType===''){\n        fetch(`https://cafehungama.herokuapp.com/user/venues/all`)\n        .then(response=>response.json())\n        .then(data=>{\n            this.setState({\n                venues:data\n            })\n        })\n        .catch(err=>{\n            console.log(err);\n        })\n    }\n\n\n     handleButtonClick(e) {\n        //message.info('Click on left button.');\n        //console.log('searching data');\n        /*console.log(this.state.location,this.state.eventType\n            ,this.state.date);*/\n\n        var data = {\n            location:this.state.location,\n            eventType:this.state.eventType,\n            date:this.state.date,\n        }\n        fetch(`https://cafehungama.herokuapp.com/user/venues/search/`,{\n            method:'POST',\n            headers:{\n                \"Content-Type\": \"application/json\"\n            },\n            body:JSON.stringify(data)\n        })\n        .then(response=>response.json())\n        .then(data=>{\n            this.setState({\n                venues:data.filteredVenues\n            })\n        })\n        .catch(err=>{\n            console.log(err);\n        })\n\n    }\n\n\n     handleLocationClick(e) {\n        // message.info('Click on menu item.');\n        this.setState({\n            location:e.key\n        })\n     }\n\n     onChange(date, dateString) {\n       //  console.log(date,dateString);\n        this.setState({\n            date:dateString\n        })\n    }\n    handleEventTypeClick(e){\n        //console.log('click event',e);\n        this.setState({\n            eventType:e.key\n        })\n    }\n    updateBookings(selectedRowKeys){\n        console.log(selectedRowKeys);\n        /*this.setState({\n            bookedSlots:bookings\n        })*/\n       /* this.setState({\n            bookedSlots:bookings\n        })*/\n    }\n\n    onSelectChange = (selectedRowKeys, selectedRows) => {\n        //  console.log(\"selectedRowKeys changed: \", selectedRowKeys, selectedRows);\n        this.setState({\n          selectedRowKeys,\n          selectedData: selectedRows,\n          //price: selectedRows.reduce((acc, curr) => acc + curr.price, 0)\n        });\n    }\n\n    signup = (userInfo) => {\n        return axios.post(\"/auth/signup\", userInfo)\n            .then(response => {\n                const { user, token } = response.data\n                this.setState({\n                    user,\n                    token\n                });\n                // forward the response, just in case\n                // it's needed down the promise chain\n                return response;\n            })\n    }\n    render() {\n        return (\n            <myContext.Provider value={{\n                ...this.state,\n                handleButtonClick:this.handleButtonClick,\n                handleLocationClick:this.handleLocationClick,\n                handleEventTypeClick:this.handleEventTypeClick,\n                onChange:this.onChange,\n                updateBookings:this.updateBookings,\n                onSelectChange:this.onSelectChange\n\n            }}>\n                {this.props.children}\n            </myContext.Provider>\n         );\n    }\n}\n\nconst ContextConsumer = myContext.Consumer;\n\nexport {ContextConsumer,ContextProvider}"]},"metadata":{},"sourceType":"module"}